<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test ADAR Program</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .test-button { background: #4c1d95; color: white; padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .results { margin-top: 20px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üß™ Test de Programa ADAR</h1>

    <div class="test-section">
        <h3>Busca el programa ADAR con estas variaciones:</h3>
        <button class="test-button" onclick="testSearch('PROGRAM ADAR')">PROGRAM ADAR</button>
        <button class="test-button" onclick="testSearch('programa adar')">programa adar</button>
        <button class="test-button" onclick="testSearch('PROGRAM adar')">PROGRAM adar</button>
        <button class="test-button" onclick="testSearch('program ADAR')">program ADAR</button>
        <button class="test-button" onclick="testSearch('ADAR')">ADAR</button>
        <button class="test-button" onclick="testSearch('Daily BioBasics')">Buscar Daily BioBasics (individual)</button>
    </div>

    <div id="results" class="results"></div>

    <!-- Scripts -->
    <script src="js/fuzzy-search.js"></script>
    <script src="js/search-local.js"></script>

    <script>
        function testSearch(query) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `<h3>Resultados para: "${query}"</h3>`;

            setTimeout(() => {
                if (window.performSearch) {
                    const results = window.performSearch(query);
                    console.log('Resultados para', query, ':', results);

                    if (results.length > 0) {
                        let html = `<div class="success">‚úÖ Se encontraron ${results.length} resultados:</div>`;

                        // Verificar si hay resultados del programa ADAR
                        const adarResults = results.filter(r => r._programSource === 'program_adar');
                        if (adarResults.length > 0) {
                            html += `<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; text-align: center;">
                                <strong>üéØ PROGRAMA ADAR: ${adarResults.length} formulaciones encontradas</strong>
                            </div>`;
                        }

                        results.forEach((result, index) => {
                            const isFromAdar = result._programSource === 'program_adar';
                            html += `<div style="background: ${isFromAdar ? '#e8f5e8' : '#f0f0f0'}; padding: 10px; margin: 5px 0; border-radius: 5px; border: ${isFromAdar ? '2px solid #4c1d95' : '1px solid #ddd'};">
                                <strong>${result.title}</strong> ${isFromAdar ? 'üéØ' : ''}<br>
                                <small>${result.filename}</small><br>
                                <small>Categor√≠a: ${result.category || 'General'}</small>
                            </div>`;
                        });

                        resultsDiv.innerHTML = html;
                    } else {
                        resultsDiv.innerHTML = `<div class="error">‚ùå No se encontraron resultados para: "${query}"</div>`;
                    }
                } else {
                    resultsDiv.innerHTML = `<div class="error">‚ùå Motor de b√∫squeda no disponible</div>`;
                }
            }, 1000);
        }

        // Auto-test despu√©s de cargar
        setTimeout(() => {
            console.log('üß™ Iniciando test autom√°tico...');
            testSearch('ADAR');
        }, 2000);
    </script>
</body>
</html>